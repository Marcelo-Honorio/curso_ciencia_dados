{
  "hash": "a3042d839c5bf13bbae4fbcd1cc3caf7",
  "result": {
    "markdown": "---\ntitle: \"Visualização de Dados com ggplot2\"\nauthor: \"Marcelo Honorio\"\nformat: \n  revealjs:\n    theme: custom.scss\n    transition: fade\n    background-transition: fade\n    highlight-style: ayu-mirage\neditor: source\ncode-link: true\nexecute:\n  echo: true\n  freeze: auto\n---\n\n\n## Visualização de dados (ggplot2)\n\n\n::: {.cell}\n\n:::\n\n\n<br>\n\nO ggplot2 é mais um pacote desenvolvido por Hadley Wickham, o criador do tidyr e do dplyr. A ideia do pacote, ainda que com algumas modificações, vem de uma obra chamada The Grammar of Graphics, que é uma maneira de descrever um gráficos a partir dos seus componentes.\n\n<br>\n\n**Tamplate:**\n\n## Visualização de dados (ggplot2)\n\n<br>\n\n`ggplot2` é o pacote de visualização de dados que é carregado com o `tidyverse`\n\na gramática dos dados gráficos mapeia os atributos estéticos dos pontos geométricos\n\ncodificar dados em pistas visuais (por exemplo, comprimento, cor, posição, tamanho) é como significamos mudanças e comparações\n\n## Os Componentes de um gráfico\n\n<br>\n\n::: columns\n::: {.column width=\"30%\"}\n-   [**Dados**]{style=\"font-weight:bold;background-color:#ccddeb;\"}\n-   **Geometria**\n-   **Mapeamento estético**\n:::\n\n::: {.column width=\"70%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nmtcars\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb\nMazda RX4           21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4\nMazda RX4 Wag       21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4\nDatsun 710          22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1\nHornet 4 Drive      21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1\nHornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2\nValiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1\nDuster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4\nMerc 240D           24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2\nMerc 230            22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2\nMerc 280            19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4\nMerc 280C           17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4\nMerc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3\nMerc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3\nMerc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3\nCadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4\nLincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4\nChrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4\nFiat 128            32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1\nHonda Civic         30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2\nToyota Corolla      33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1\nToyota Corona       21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1\nDodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2\nAMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2\nCamaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4\nPontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2\nFiat X1-9           27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1\nPorsche 914-2       26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2\nLotus Europa        30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2\nFord Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4\nFerrari Dino        19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6\nMaserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8\nVolvo 142E          21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2\n```\n:::\n:::\n\n:::\n:::\n\n## Os Componentes de um gráfico\n\n<br>\n\n::: columns\n::: {.column width=\"30%\"}\n-   [**Dados**]{style=\"font-weight:bold;background-color:#ccddeb;\"}\n-   **Mapeamento estético**\n-   **Geometria**\n:::\n\n::: {.column width=\"70%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"1\"}\nggplot(mtcars)\n```\n\n::: {.cell-output-display}\n![](visualizacao_ggplot2_files/figure-revealjs/unnamed-chunk-3-1.png){width=960}\n:::\n:::\n\n:::\n:::\n\n## Os Componentes de um gráfico\n\n<br>\n\n::: columns\n::: {.column width=\"30%\"}\n-   [**Dados**]{style=\"font-weight:bold;background-color:#ccddeb;\"}\n-   [**Mapeamento estético**]{style=\"font-weight:bold;background-color:#ccddeb;\"}\n-   **Geometria**\n:::\n\n::: {.column width=\"70%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nggplot(mtcars, \n       aes(x = cyl, y = wt))\n```\n\n::: {.cell-output-display}\n![](visualizacao_ggplot2_files/figure-revealjs/unnamed-chunk-4-1.png){width=960}\n:::\n:::\n\n:::\n:::\n\n## Os Componentes de um gráfico\n\n<br>\n\n::: columns\n::: {.column width=\"30%\"}\n-   [**Dados**]{style=\"font-weight:bold;background-color:#ccddeb;\"}\n-   [**Mapeamento estético**]{style=\"font-weight:bold;background-color:#ccddeb;\"}\n-   [**Geometria**]{style=\"font-weight:bold;background-color:#ccddeb;\"}\n:::\n\n::: {.column width=\"70%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\nggplot(mtcars, \n       aes(x = cyl, y = wt)) +\n  geom_boxplot()\n```\n\n::: {.cell-output-display}\n![](visualizacao_ggplot2_files/figure-revealjs/unnamed-chunk-5-1.png){width=960}\n:::\n:::\n\n:::\n:::\n\n## Formas geometrica\n\nOs objetos geométricos começam com a expressão `geom_`\n\n\n::: {.cell tbl-colwidths='[60,40]'}\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Tipo </th>\n   <th style=\"text-align:left;\"> Objeto Geométrico </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Dispersão </td>\n   <td style=\"text-align:left;\"> geom_point </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Gráficos de bolhas </td>\n   <td style=\"text-align:left;\"> goem_point </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Gráficos de barras </td>\n   <td style=\"text-align:left;\"> geom_bar e geom_coll </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Histograma </td>\n   <td style=\"text-align:left;\"> geom_histogram </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Boxplot </td>\n   <td style=\"text-align:left;\"> geom_boxplot </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Densidade </td>\n   <td style=\"text-align:left;\"> geom_density </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Gráfico de linhas </td>\n   <td style=\"text-align:left;\"> geom_line </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n## Bar chart\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"1-2|3|4\"}\nmtcars  |> \n  count(cyl)  |> \n  ggplot(aes(x = cyl, y = n)) +\n  geom_bar(stat = \"identity\")\n```\n:::\n\n\n. . .\n\nto combine lines into one code chunk, use `+` instead of ` |> `\n\n. . .\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmtcars  |> \n  count(cyl)  |> \n  ggplot(aes(x = cyl, y = n)) +\n  geom_bar(stat = \"identity\")\n```\n\n::: {.cell-output-display}\n![](visualizacao_ggplot2_files/figure-revealjs/unnamed-chunk-8-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## Bar chart\n\ncan create a prettier plot pretty easily\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"mostrar o codigo\"}\nmtcars |> \n  count(cyl)  |> \n  ggplot(aes(x = reorder(cyl, -n), y = n)) +\n  geom_bar(stat = \"identity\", fill = \"#cc0000\") +\n  scale_y_continuous(expand = expansion(mult = c(0, 0.1))) +\n  geom_text(aes(label = n), vjust = -0.5) +\n  labs(x = NULL, y = NULL,\n       title = \"Count of faculty by rank, 2018-2021\") +\n  theme_linedraw() +\n  theme(panel.grid.major.x = element_blank(),\n        axis.ticks = element_blank())\n```\n\n::: {.cell-output-display}\n![](visualizacao_ggplot2_files/figure-revealjs/unnamed-chunk-9-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## Line graph\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"1-2|3|4\"}\nmtcars  |>  \n  filter(!is.na(mpg)) |>\n  ggplot(aes(x = cyl, y = wt, color = carb)) +\n  geom_line()\n```\n:::\n\n\n. . .\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](visualizacao_ggplot2_files/figure-revealjs/unnamed-chunk-11-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## Line graph\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"expand for full code\"}\nmtcars  |>  \n  filter(!is.na(mpg))  |>  \n  ggplot(aes(x = wt, y = qsec, color = cyl)) +\n  geom_line() +\n  geom_point() +\n  #scale_color_brewer(type = \"qual\", palette = \"Dark2\") +\n  labs(x = NULL, y = \"Average enrollment\",\n       title = \"Average undergraduate enrollment per rank over time\") +\n  theme_linedraw() +\n  theme(panel.grid.major.x = element_blank(),\n        axis.ticks = element_blank(),\n        legend.title = element_blank(),\n        legend.background = element_rect(fill = NA),\n        legend.key = element_rect(fill = NA),\n        legend.position = c(0.85, 0.82))\n```\n\n::: {.cell-output-display}\n![](visualizacao_ggplot2_files/figure-revealjs/unnamed-chunk-12-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n\n## Mapeamento básico\n\n<br>\n\nEsquema de uma plotagem de dados sem quaisquer modificações.\n\n<img src = \"imagens/ggplot_1.png\">\n\n::: {.cell}\n\n:::\n\n\n## Adicionando propriedades estéticas\n\n<br>\n\nMapear variáveis em outras propriedades estéticas do gráfico, tais como cor, tamanho e forma.\n\n<img src = \"imagens/ggplot_2.png\">\n\n## Combinando aes e geom\n\n\nPodemos combinar uma série de camadas compostas de aes e geoms diferentes, adicionando informações ao gráfico iterativamente.\n\n<img src = \"imagens/ggplot_3.png\">\n\n## Combinando aes e geom\n\nMapear dentro dos geoms valem apenas para aquele geom especificamente.\n\n<img src = \"imagens/ggplot_4.png\">\n\n------------------------------------------------------------------------\n\n## ggplot2 resources\n\nfrom [R for Data Science](https://r4ds.had.co.nz/data-visualisation.html)\n\n<br>\n\n[Data Visualization: a practical introduction](https://socviz.co/index.html#preface)\n\n<br>\n\ncreating [custom themes](https://themockup.blog/posts/2020-12-26-creating-and-using-custom-ggplot2-themes/)\n\n<br>\n\nthe [ggplot2 book](https://ggplot2-book.org/)\n\n<br>\n\nthe [R graph gallery](https://r-graph-gallery.com/index.html)\n\n------------------------------------------------------------------------\n",
    "supporting": [
      "visualizacao_ggplot2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\r\n<script>\r\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\r\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\r\n  // slide changes (different for each slide format).\r\n  (function () {\r\n    // dispatch for htmlwidgets\r\n    function fireSlideEnter() {\r\n      const event = window.document.createEvent(\"Event\");\r\n      event.initEvent(\"slideenter\", true, true);\r\n      window.document.dispatchEvent(event);\r\n    }\r\n\r\n    function fireSlideChanged(previousSlide, currentSlide) {\r\n      fireSlideEnter();\r\n\r\n      // dispatch for shiny\r\n      if (window.jQuery) {\r\n        if (previousSlide) {\r\n          window.jQuery(previousSlide).trigger(\"hidden\");\r\n        }\r\n        if (currentSlide) {\r\n          window.jQuery(currentSlide).trigger(\"shown\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // hookup for slidy\r\n    if (window.w3c_slidy) {\r\n      window.w3c_slidy.add_observer(function (slide_num) {\r\n        // slide_num starts at position 1\r\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\r\n      });\r\n    }\r\n\r\n  })();\r\n</script>\r\n\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}